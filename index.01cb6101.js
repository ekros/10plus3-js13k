!function(e,t,i,s,r){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o="function"==typeof n[s]&&n[s],a=o.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function h(t,i){if(!a[t]){if(!e[t]){var r="function"==typeof n[s]&&n[s];if(!i&&r)return r(t,!0);if(o)return o(t,!0);if(l&&"string"==typeof t)return l(t);var c=Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}d.resolve=function(i){var s=e[t][1][i];return null!=s?s:i},d.cache={};var u=a[t]=new h.Module(t);e[t][0].call(u.exports,d,u,u.exports,this)}return a[t].exports;function d(e){var t=d.resolve(e);return!1===t?{}:h(t)}}h.isParcelRequire=!0,h.Module=function(e){this.id=e,this.bundle=h,this.exports={}},h.modules=e,h.cache=a,h.parent=o,h.register=function(t,i){e[t]=[function(e,t){t.exports=i},{}]},Object.defineProperty(h,"root",{get:function(){return n[s]}}),n[s]=h;for(var c=0;c<t.length;c++)h(t[c]);if(i){var u=h(i);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof define&&define.amd&&define(function(){return u})}}({"8RSWf":[function(e,t,i){let s,r,n,o,a;var l=e("littlejsengine"),h=e("./helpers"),c=e("./types"),u=e("./constants"),d=e("./render-functions");(0,l.setCanvasPixelated)(!1),(0,l.setShowWatermark)(!1);let p=new l.Sound([,0,349.2282]),f=new l.Sound([,0,146.8324,,,.5,,.3,,,,,,,,,,,.2]),x=u.GAME_STATE.PLAYING,g=1,y=localStorage.getItem("maxLevel"),m=e=>{e.sequence.forEach(e=>{e.type===c.OPERATION_TYPE.ADD?r=e.value:e.type===c.OPERATION_TYPE.SUB?n=e.value:e.type===c.OPERATION_TYPE.MUL?a=e.value:e.type===c.OPERATION_TYPE.DIV&&(o=e.value)})},T=()=>{r=void 0,n=void 0,o=void 0,a=void 0},E=()=>{y=localStorage.getItem("maxLevel");let e=u.DIFFICULTY.easy;g>10?e=u.DIFFICULTY.hard:g>5&&(e=u.DIFFICULTY.medium),s=(0,h.startGameRound)(e),T(),m(s),x=u.GAME_STATE.PLAYING},A=()=>{12!==g?g+=1:g+=2,E()},v=e=>{e.type===c.OPERATION_TYPE.ADD?s.initialNumber+=e.value:e.type===c.OPERATION_TYPE.SUB?s.initialNumber-=e.value:e.type===c.OPERATION_TYPE.MUL?s.initialNumber*=e.value:e.type===c.OPERATION_TYPE.DIV&&(s.initialNumber/=e.value)};(0,l.engineInit)(function(){m(s=(0,h.startGameRound)())},function(){let e=e=>{let t=s.sequence.pop();t.type===e?(T(),m(s),v(t),p.play(),0===s.sequence.length&&(x=u.GAME_STATE.WIN)):(x=u.GAME_STATE.LOSE,f.play(),g>Number(y)&&localStorage.setItem("maxLevel",String(g)))};x===u.GAME_STATE.PLAYING&&(0,l.keyWasPressed)("ArrowUp")&&r?e(c.OPERATION_TYPE.ADD):x===u.GAME_STATE.PLAYING&&(0,l.keyWasPressed)("ArrowRight")&&a?e(c.OPERATION_TYPE.MUL):x===u.GAME_STATE.PLAYING&&(0,l.keyWasPressed)("ArrowDown")&&n?e(c.OPERATION_TYPE.SUB):x===u.GAME_STATE.PLAYING&&(0,l.keyWasPressed)("ArrowLeft")&&o?e(c.OPERATION_TYPE.DIV):x===u.GAME_STATE.WIN&&(0,l.keyWasPressed)("Enter")?A():x===u.GAME_STATE.LOSE&&(0,l.keyWasPressed)("Enter")&&(g=1,E())},function(){},function(){switch((0,d.renderBackground)(),(0,d.renderLevel)(g),y&&(0,d.renderMaxLevel)(y),x===u.GAME_STATE.WIN?(0,l.drawRect)((0,l.vec2)(-.05,0),(0,l.vec2)(1.7,1.7),u.COLOR_PALETTE.GREEN):(0,l.drawRect)((0,l.vec2)(-.05,0),(0,l.vec2)(1.7,1.7),u.COLOR_PALETTE.BLUE),(0,l.drawText)(s.initialNumber.toString(),(0,l.vec2)(0,0),1,u.COLOR_PALETTE.WHITE,4,u.COLOR_PALETTE.TRANSPARENT),r&&((0,l.drawText)("+",(0,l.vec2)(0,2),1,u.COLOR_PALETTE.WHITE,2,u.COLOR_PALETTE.TRANSPARENT),(0,l.drawText)(String(r),(0,l.vec2)(0,4),1,u.COLOR_PALETTE.WHITE,2,u.COLOR_PALETTE.TRANSPARENT),(0,l.drawRect)((0,l.vec2)(0,4),(0,l.vec2)(1.7,1.7),u.COLOR_PALETTE.ORANGE)),n&&((0,l.drawText)("-",(0,l.vec2)(0,-2),1,u.COLOR_PALETTE.WHITE,2,u.COLOR_PALETTE.TRANSPARENT),(0,l.drawText)(String(n),(0,l.vec2)(0,-4),1,u.COLOR_PALETTE.WHITE,2,u.COLOR_PALETTE.TRANSPARENT),(0,l.drawRect)((0,l.vec2)(0,-4),(0,l.vec2)(1.7,1.7),u.COLOR_PALETTE.ORANGE)),a&&((0,l.drawText)("x",(0,l.vec2)(2,0),1,u.COLOR_PALETTE.WHITE,2,u.COLOR_PALETTE.TRANSPARENT),(0,l.drawText)(String(a),(0,l.vec2)(4,0),1,u.COLOR_PALETTE.WHITE,2,u.COLOR_PALETTE.TRANSPARENT),(0,l.drawRect)((0,l.vec2)(4,0),(0,l.vec2)(1.7,1.7),u.COLOR_PALETTE.ORANGE)),o&&((0,l.drawText)("/",(0,l.vec2)(-2,0),1,u.COLOR_PALETTE.WHITE,2,u.COLOR_PALETTE.TRANSPARENT),(0,l.drawText)(String(o),(0,l.vec2)(-4,0),1,u.COLOR_PALETTE.WHITE,2,u.COLOR_PALETTE.TRANSPARENT),(0,l.drawRect)((0,l.vec2)(-4,0),(0,l.vec2)(1.7,1.7),u.COLOR_PALETTE.ORANGE)),g<=3&&(0,d.renderInstructions)(),x){case u.GAME_STATE.WIN:(0,l.drawText)("Correct! Press enter to continue...",(0,l.vec2)(0,6),1,u.COLOR_PALETTE.GREEN,2,u.COLOR_PALETTE.TRANSPARENT);break;case u.GAME_STATE.LOSE:(0,l.drawText)("Wrong! Press enter to continue...",(0,l.vec2)(0,6),1,u.COLOR_PALETTE.RED,2,u.COLOR_PALETTE.TRANSPARENT)}},function(){})},{littlejsengine:"gSdBJ","./helpers":"8HL3d","./types":"dHDQY","./constants":"7NbOs","./render-functions":"fQxwN"}],gSdBJ:[function(e,t,i){let s,r,n,o,a,l,h,c,u,d,p,f,x,g,y,m,T,E,A;var v=e("@parcel/transformer-js/src/esmodule-helpers.js");v.defineInteropFlag(i),v.export(i,"engineName",()=>sP),v.export(i,"engineVersion",()=>sb),v.export(i,"frameRate",()=>sw),v.export(i,"timeDelta",()=>sR),v.export(i,"engineObjects",()=>sI),v.export(i,"frame",()=>sL),v.export(i,"time",()=>sN),v.export(i,"timeReal",()=>sC),v.export(i,"paused",()=>s_),v.export(i,"setPaused",()=>sz),v.export(i,"engineInit",()=>sB),v.export(i,"engineObjectsUpdate",()=>sG),v.export(i,"engineObjectsDestroy",()=>sF),v.export(i,"engineObjectsCallback",()=>sV),v.export(i,"engineAddPlugin",()=>sj),v.export(i,"debug",()=>S),v.export(i,"debugOverlay",()=>b),v.export(i,"showWatermark",()=>O),v.export(i,"ASSERT",()=>_),v.export(i,"debugRect",()=>z),v.export(i,"debugPoly",()=>M),v.export(i,"debugCircle",()=>Y),v.export(i,"debugPoint",()=>k),v.export(i,"debugLine",()=>U),v.export(i,"debugOverlap",()=>W),v.export(i,"debugText",()=>j),v.export(i,"debugClear",()=>B),v.export(i,"debugSaveCanvas",()=>G),v.export(i,"debugSaveText",()=>F),v.export(i,"debugSaveDataURL",()=>V),v.export(i,"cameraPos",()=>eb),v.export(i,"cameraScale",()=>ew),v.export(i,"canvasMaxSize",()=>eR),v.export(i,"canvasFixedSize",()=>eI),v.export(i,"canvasPixelated",()=>eD),v.export(i,"fontDefault",()=>eL),v.export(i,"showSplashScreen",()=>eN),v.export(i,"headlessMode",()=>eC),v.export(i,"tileSizeDefault",()=>eM),v.export(i,"tileFixBleedScale",()=>eY),v.export(i,"enablePhysicsSolver",()=>ek),v.export(i,"objectDefaultMass",()=>eU),v.export(i,"objectDefaultDamping",()=>eW),v.export(i,"objectDefaultAngleDamping",()=>ej),v.export(i,"objectDefaultElasticity",()=>eB),v.export(i,"objectDefaultFriction",()=>eG),v.export(i,"objectMaxSpeed",()=>eF),v.export(i,"gravity",()=>eV),v.export(i,"particleEmitRateScale",()=>eH),v.export(i,"glEnable",()=>e_),v.export(i,"glOverlay",()=>ez),v.export(i,"gamepadsEnable",()=>eq),v.export(i,"gamepadDirectionEmulateStick",()=>eJ),v.export(i,"inputWASDEmulateDirection",()=>eQ),v.export(i,"touchGamepadEnable",()=>eX),v.export(i,"touchGamepadAnalog",()=>eZ),v.export(i,"touchGamepadSize",()=>e$),v.export(i,"touchGamepadAlpha",()=>e0),v.export(i,"vibrateEnable",()=>e1),v.export(i,"soundEnable",()=>e2),v.export(i,"soundVolume",()=>e5),v.export(i,"soundDefaultRange",()=>e3),v.export(i,"soundDefaultTaper",()=>e4),v.export(i,"medalDisplayTime",()=>e6),v.export(i,"medalDisplaySlideTime",()=>e9),v.export(i,"medalDisplaySize",()=>e8),v.export(i,"medalDisplayIconSize",()=>e7),v.export(i,"setCameraPos",()=>tt),v.export(i,"setCameraScale",()=>ti),v.export(i,"setCanvasMaxSize",()=>ts),v.export(i,"setCanvasFixedSize",()=>tr),v.export(i,"setCanvasPixelated",()=>tn),v.export(i,"setFontDefault",()=>to),v.export(i,"setShowSplashScreen",()=>ta),v.export(i,"setHeadlessMode",()=>tl),v.export(i,"setGlEnable",()=>th),v.export(i,"setGlOverlay",()=>tc),v.export(i,"setTileSizeDefault",()=>tu),v.export(i,"setTileFixBleedScale",()=>td),v.export(i,"setEnablePhysicsSolver",()=>tp),v.export(i,"setObjectDefaultMass",()=>tf),v.export(i,"setObjectDefaultDamping",()=>tx),v.export(i,"setObjectDefaultAngleDamping",()=>tg),v.export(i,"setObjectDefaultElasticity",()=>ty),v.export(i,"setObjectDefaultFriction",()=>tm),v.export(i,"setObjectMaxSpeed",()=>tT),v.export(i,"setGravity",()=>tE),v.export(i,"setParticleEmitRateScale",()=>tA),v.export(i,"setTouchInputEnable",()=>tP),v.export(i,"setGamepadsEnable",()=>tv),v.export(i,"setGamepadDirectionEmulateStick",()=>tS),v.export(i,"setInputWASDEmulateDirection",()=>tO),v.export(i,"setTouchGamepadEnable",()=>tb),v.export(i,"setTouchGamepadAnalog",()=>tw),v.export(i,"setTouchGamepadSize",()=>tR),v.export(i,"setTouchGamepadAlpha",()=>tI),v.export(i,"setVibrateEnable",()=>tD),v.export(i,"setSoundEnable",()=>tL),v.export(i,"setSoundVolume",()=>tN),v.export(i,"setSoundDefaultRange",()=>tC),v.export(i,"setSoundDefaultTaper",()=>t_),v.export(i,"setMedalDisplayTime",()=>tz),v.export(i,"setMedalDisplaySlideTime",()=>tM),v.export(i,"setMedalDisplaySize",()=>tY),v.export(i,"setMedalDisplayIconSize",()=>tk),v.export(i,"setMedalsPreventUnlock",()=>tU),v.export(i,"setShowWatermark",()=>tW),v.export(i,"setDebugKey",()=>tj),v.export(i,"PI",()=>q),v.export(i,"abs",()=>J),v.export(i,"min",()=>Q),v.export(i,"max",()=>K),v.export(i,"sign",()=>X),v.export(i,"mod",()=>Z),v.export(i,"clamp",()=>$),v.export(i,"percent",()=>ee),v.export(i,"distanceWrap",()=>ei),v.export(i,"lerpWrap",()=>es),v.export(i,"distanceAngle",()=>er),v.export(i,"lerpAngle",()=>en),v.export(i,"lerp",()=>et),v.export(i,"smoothStep",()=>eo),v.export(i,"nearestPowerOfTwo",()=>ea),v.export(i,"isOverlapping",()=>el),v.export(i,"wave",()=>eh),v.export(i,"formatTime",()=>ec),v.export(i,"rand",()=>eu),v.export(i,"randInt",()=>ed),v.export(i,"randSign",()=>ep),v.export(i,"randInCircle",()=>ex),v.export(i,"randVector",()=>ef),v.export(i,"randColor",()=>eg),v.export(i,"RandomGenerator",()=>ey),v.export(i,"Vector2",()=>eE),v.export(i,"Color",()=>eO),v.export(i,"Timer",()=>eP),v.export(i,"vec2",()=>em),v.export(i,"rgb",()=>eA),v.export(i,"hsl",()=>ev),v.export(i,"textureInfos",()=>tF),v.export(i,"tile",()=>tV),v.export(i,"TileInfo",()=>tH),v.export(i,"TextureInfo",()=>tq),v.export(i,"mainCanvas",()=>s),v.export(i,"mainContext",()=>r),v.export(i,"overlayCanvas",()=>n),v.export(i,"overlayContext",()=>o),v.export(i,"mainCanvasSize",()=>tG),v.export(i,"screenToWorld",()=>tJ),v.export(i,"worldToScreen",()=>tQ),v.export(i,"drawTile",()=>tX),v.export(i,"drawRect",()=>tZ),v.export(i,"drawLine",()=>t$),v.export(i,"drawCanvas2D",()=>t0),v.export(i,"setBlendMode",()=>t1),v.export(i,"drawTextScreen",()=>t5),v.export(i,"drawText",()=>t2),v.export(i,"engineFontImage",()=>l),v.export(i,"FontImage",()=>t3),v.export(i,"isFullscreen",()=>t4),v.export(i,"toggleFullscreen",()=>t6),v.export(i,"getCameraSize",()=>tK),v.export(i,"glCanvas",()=>u),v.export(i,"glContext",()=>d),v.export(i,"glSetTexture",()=>i5),v.export(i,"glCompileShader",()=>i3),v.export(i,"glCreateProgram",()=>i4),v.export(i,"glCreateTexture",()=>i6),v.export(i,"keyIsDown",()=>t9),v.export(i,"keyWasPressed",()=>t8),v.export(i,"keyWasReleased",()=>t7),v.export(i,"clearInput",()=>ie),v.export(i,"mouseIsDown",()=>it),v.export(i,"mouseWasPressed",()=>ii),v.export(i,"mouseWasReleased",()=>is),v.export(i,"mousePos",()=>ir),v.export(i,"mousePosScreen",()=>io),v.export(i,"mouseWheel",()=>ia),v.export(i,"isUsingGamepad",()=>il),v.export(i,"preventDefaultInput",()=>ih),v.export(i,"gamepadIsDown",()=>ic),v.export(i,"gamepadWasPressed",()=>iu),v.export(i,"gamepadWasReleased",()=>id),v.export(i,"gamepadStick",()=>ip),v.export(i,"mouseToScreen",()=>im),v.export(i,"gamepadsUpdate",()=>iE),v.export(i,"vibrate",()=>iA),v.export(i,"vibrateStop",()=>iv),v.export(i,"isTouchDevice",()=>iS),v.export(i,"Sound",()=>iw),v.export(i,"SoundWave",()=>iR),v.export(i,"Music",()=>iD),v.export(i,"playAudioFile",()=>iI),v.export(i,"speak",()=>iL),v.export(i,"speakStop",()=>iN),v.export(i,"getNoteFrequency",()=>iC),v.export(i,"audioContext",()=>h),v.export(i,"playSamples",()=>iz),v.export(i,"zzfx",()=>iM),v.export(i,"EngineObject",()=>tB),v.export(i,"tileCollision",()=>iU),v.export(i,"tileCollisionSize",()=>iW),v.export(i,"initTileCollision",()=>ij),v.export(i,"setTileCollisionData",()=>iB),v.export(i,"getTileCollisionData",()=>iG),v.export(i,"tileCollisionTest",()=>iF),v.export(i,"tileCollisionRaycast",()=>iV),v.export(i,"TileLayerData",()=>iH),v.export(i,"TileLayer",()=>iq),v.export(i,"ParticleEmitter",()=>iJ),v.export(i,"Particle",()=>iQ),v.export(i,"medals",()=>iK),v.export(i,"medalsPreventUnlock",()=>te),v.export(i,"medalsInit",()=>i0),v.export(i,"Medal",()=>i1);let S=!0,O=!0,P="Escape",b=!1,w=[],R=!1,I=!1,D=!1,L=!1,N,C;function _(e,t){t?console.assert(e,t):console.assert(e)}function z(e,t=em(),i="#fff",s=0,r=0,n=!1){_("string"==typeof i,"pass in css color strings"),w.push({pos:e,size:em(t),color:i,time:new eP(s),angle:r,fill:n})}function M(e,t,i="#fff",s=0,r=0,n=!1){_("string"==typeof i,"pass in css color strings"),w.push({pos:e,points:t,color:i,time:new eP(s),angle:r,fill:n})}function Y(e,t=0,i="#fff",s=0,r=!1){_("string"==typeof i,"pass in css color strings"),w.push({pos:e,size:t,color:i,time:new eP(s),angle:0,fill:r})}function k(e,t,i,s){_("string"==typeof t,"pass in css color strings"),z(e,void 0,t,i,s)}function U(e,t,i,s=.1,r){_("string"==typeof i,"pass in css color strings");let n=em((t.x-e.x)/2,(t.y-e.y)/2),o=em(s,2*n.length());z(e.add(n),o,i,r,n.angle(),!0)}function W(e,t,i,s,r){let n=em(Q(e.x-t.x/2,i.x-s.x/2),Q(e.y-t.y/2,i.y-s.y/2)),o=em(K(e.x+t.x/2,i.x+s.x/2),K(e.y+t.y/2,i.y+s.y/2));z(n.lerp(o,.5),o.subtract(n),r)}function j(e,t,i=1,s="#fff",r=0,n=0,o="monospace"){_("string"==typeof s,"pass in css color strings"),w.push({text:e,pos:t,size:i,color:s,time:new eP(r),angle:n,font:o})}function B(){w=[]}function G(e,t="screenshot",i="image/png"){V(e.toDataURL(i),t)}function F(e,t="text",i="text/plain"){V(URL.createObjectURL(new Blob([e],{type:i})),t)}function V(e,t){C.download=t,C.href=e,C.click()}function H(){S&&(t8(P)&&(b=!b),b&&(t8("Digit0")&&(O=!O),t8("Digit1")&&(R=!R,D=!1),t8("Digit2")&&(D=!D,R=!1),t8("Digit3")&&(L=!L),t8("Digit4")&&(I=!I),t8("Digit5")&&(N=1)))}let q=Math.PI;function J(e){return Math.abs(e)}function Q(e,t){return Math.min(e,t)}function K(e,t){return Math.max(e,t)}function X(e){return Math.sign(e)}function Z(e,t=1){return(e%t+t)%t}function $(e,t=0,i=1){return e<t?t:e>i?i:e}function ee(e,t,i){return(i-=t)?$((e-t)/i):0}function et(e,t,i){return t+$(e)*(i-t)}function ei(e,t,i=1){let s=(e-t)%i;return 2*s%i-s}function es(e,t,i,s=1){return i+$(e)*ei(t,i,s)}function er(e,t){return ei(e,t,2*q)}function en(e,t,i){return es(e,t,i,2*q)}function eo(e){return e*e*(3-2*e)}function ea(e){return 2**Math.ceil(Math.log2(e))}function el(e,t,i,s=em()){return 2*J(e.x-i.x)<t.x+s.x&&2*J(e.y-i.y)<t.y+s.y}function eh(e=1,t=1,i=sN){return t/2*(1-Math.cos(i*e*2*q))}function ec(e){return(e/60|0)+":"+(e%60<10?"0":"")+(e%60|0)}function eu(e=1,t=0){return t+Math.random()*(e-t)}function ed(e,t=0){return Math.floor(eu(e,t))}function ep(){return 2*ed(2)-1}function ef(e=1){return new eE().setAngle(eu(2*q),e)}function ex(e=1,t=0){return e>0?ef(e*eu(t/e,1)**.5):new eE}function eg(e=new eO,t=new eO(0,0,0,1),i=!1){return i?e.lerp(t,eu()):new eO(eu(e.r,t.r),eu(e.g,t.g),eu(e.b,t.b),eu(e.a,t.a))}class ey{constructor(e){this.seed=e}float(e=1,t=0){return this.seed^=this.seed<<13,this.seed^=this.seed>>>17,this.seed^=this.seed<<5,t+(e-t)*J(this.seed%1e8)/1e8}int(e,t=0){return Math.floor(this.float(e,t))}sign(){return this.float()>.5?1:-1}}function em(e=0,t){return"number"==typeof e?new eE(e,void 0==t?e:t):new eE(e.x,e.y)}function eT(e){return e instanceof eE}class eE{constructor(e=0,t=0){_("number"==typeof e&&"number"==typeof t),this.x=e,this.y=t}set(e=0,t=0){return this.x=e,this.y=t,this}copy(){return new eE(this.x,this.y)}add(e){return _(eT(e)),new eE(this.x+e.x,this.y+e.y)}subtract(e){return _(eT(e)),new eE(this.x-e.x,this.y-e.y)}multiply(e){return _(eT(e)),new eE(this.x*e.x,this.y*e.y)}divide(e){return _(eT(e)),new eE(this.x/e.x,this.y/e.y)}scale(e){return _(!eT(e)),new eE(this.x*e,this.y*e)}length(){return this.lengthSquared()**.5}lengthSquared(){return this.x**2+this.y**2}distance(e){return _(eT(e)),this.distanceSquared(e)**.5}distanceSquared(e){return _(eT(e)),(this.x-e.x)**2+(this.y-e.y)**2}normalize(e=1){let t=this.length();return t?this.scale(e/t):new eE(0,e)}clampLength(e=1){let t=this.length();return t>e?this.scale(e/t):this}dot(e){return _(eT(e)),this.x*e.x+this.y*e.y}cross(e){return _(eT(e)),this.x*e.y-this.y*e.x}angle(){return Math.atan2(this.x,this.y)}setAngle(e=0,t=1){return this.x=t*Math.sin(e),this.y=t*Math.cos(e),this}rotate(e){let t=Math.cos(e),i=Math.sin(e);return new eE(this.x*t-this.y*i,this.x*i+this.y*t)}setDirection(e,t=1){return _(0==e||1==e||2==e||3==e),em(e%2?e-1?-t:t:0,e%2?0:e?-t:t)}direction(){return J(this.x)>J(this.y)?this.x<0?3:1:this.y<0?2:0}invert(){return new eE(this.y,-this.x)}floor(){return new eE(Math.floor(this.x),Math.floor(this.y))}area(){return J(this.x*this.y)}lerp(e,t){return _(eT(e)),this.add(e.subtract(this).scale($(t)))}arrayCheck(e){return _(eT(e)),this.x>=0&&this.y>=0&&this.x<e.x&&this.y<e.y}toString(e=3){if(S)return`(${(this.x<0?"":" ")+this.x.toFixed(e)},${(this.y<0?"":" ")+this.y.toFixed(e)} )`}}function eA(e,t,i,s){return new eO(e,t,i,s)}function ev(e,t,i,s){return new eO().setHSLA(e,t,i,s)}function eS(e){return e instanceof eO}class eO{constructor(e=1,t=1,i=1,s=1){this.r=e,this.g=t,this.b=i,this.a=s}set(e=1,t=1,i=1,s=1){return this.r=e,this.g=t,this.b=i,this.a=s,this}copy(){return new eO(this.r,this.g,this.b,this.a)}add(e){return _(eS(e)),new eO(this.r+e.r,this.g+e.g,this.b+e.b,this.a+e.a)}subtract(e){return _(eS(e)),new eO(this.r-e.r,this.g-e.g,this.b-e.b,this.a-e.a)}multiply(e){return _(eS(e)),new eO(this.r*e.r,this.g*e.g,this.b*e.b,this.a*e.a)}divide(e){return _(eS(e)),new eO(this.r/e.r,this.g/e.g,this.b/e.b,this.a/e.a)}scale(e,t=e){return new eO(this.r*e,this.g*e,this.b*e,this.a*t)}clamp(){return new eO($(this.r),$(this.g),$(this.b),$(this.a))}lerp(e,t){return _(eS(e)),this.add(e.subtract(this).scale($(t)))}setHSLA(e=0,t=0,i=1,s=1){e=Z(e,1),t=$(t);let r=(i=$(i))<.5?i*(1+t):i+t-i*t,n=2*i-r,o=(e,t,i)=>6*(i=Z(i,1))<1?e+(t-e)*6*i:2*i<1?t:3*i<2?e+(t-e)*(4-6*i):e;return this.r=o(n,r,e+1/3),this.g=o(n,r,e),this.b=o(n,r,e-1/3),this.a=s,this}HSLA(){let e=$(this.r),t=$(this.g),i=$(this.b),s=$(this.a),r=Math.max(e,t,i),n=Math.min(e,t,i),o=(r+n)/2,a=0,l=0;if(r!=n){let s=r-n;l=o>.5?s/(2-r-n):s/(r+n),e==r?a=(t-i)/s+(t<i?6:0):t==r?a=(i-e)/s+2:i==r&&(a=(e-t)/s+4)}return[a/6,l,o,s]}mutate(e=.05,t=0){return new eO(this.r+eu(e,-e),this.g+eu(e,-e),this.b+eu(e,-e),this.a+eu(t,-t)).clamp()}toString(e=!0){let t=e=>((e=255*e|0)<16?"0":"")+e.toString(16);return"#"+t(this.r)+t(this.g)+t(this.b)+(e?t(this.a):"")}setHex(e){let t=t=>$(parseInt(e.slice(t,t+2),16)/255);return this.r=t(1),this.g=t(3),this.b=t(5),this.a=e.length>7?t(7):1,this}rgbaInt(){let e=255*$(this.r)|0;return e+(255*$(this.g)<<8)+(255*$(this.b)<<16)+(255*$(this.a)<<24)}}eA(),eA(0,0,0),eA(.5,.5,.5),eA(1,0,0),eA(1,.5,0),eA(1,1,0),eA(0,1,0),eA(0,1,1),eA(0,0,1),eA(.5,0,1),eA(1,0,1);class eP{constructor(e){this.time=void 0==e?void 0:sN+e,this.setTime=e}set(e=0){this.time=sN+e,this.setTime=e}unset(){this.time=void 0}isSet(){return void 0!=this.time}active(){return sN<this.time}elapsed(){return sN>=this.time}get(){return this.isSet()?sN-this.time:0}getPercent(){return this.isSet()?ee(this.time-sN,this.setTime,0):0}toString(){if(S)return this.isSet()?Math.abs(this.get())+" seconds "+(0>this.get()?"before":"after"):"unset"}valueOf(){return this.get()}}let eb=em(),ew=32,eR=em(1920,1080),eI=em(),eD=!0,eL="arial",eN=!1,eC=!1,e_=!0,ez=!0,eM=em(16),eY=.5,ek=!0,eU=1,eW=1,ej=1,eB=0,eG=.8,eF=1,eV=0,eH=1,eq=!0,eJ=!0,eQ=!0,eK=!0,eX=!1,eZ=!0,e$=99,e0=.3,e1=!0,e2=!0,e5=.3,e3=40,e4=.7,e6=5,e9=.5,e8=em(640,80),e7=50,te=!1;function tt(e){eb=e}function ti(e){ew=e}function ts(e){eR=e}function tr(e){eI=e}function tn(e){eD=e}function to(e){eL=e}function ta(e){eN=e}function tl(e){eC=e}function th(e){e_=e}function tc(e){ez=e}function tu(e){eM=e}function td(e){eY=e}function tp(e){ek=e}function tf(e){eU=e}function tx(e){eW=e}function tg(e){ej=e}function ty(e){eB=e}function tm(e){eG=e}function tT(e){eF=e}function tE(e){eV=e}function tA(e){eH=e}function tv(e){eq=e}function tS(e){eJ=e}function tO(e){eQ=e}function tP(e){eK=e}function tb(e){eX=e}function tw(e){eZ=e}function tR(e){e$=e}function tI(e){e0=e}function tD(e){e1=e}function tL(e){e2=e}function tN(e){e5=e,e2&&!eC&&c&&(c.gain.value=e)}function tC(e){e3=e}function t_(e){e4=e}function tz(e){e6=e}function tM(e){e9=e}function tY(e){e8=e}function tk(e){e7=e}function tU(e){te=e}function tW(e){O=e}function tj(e){P=e}class tB{constructor(e=em(),t=em(1),i,s=0,r,n=0){_(eT(e)&&eT(t),"ensure pos and size are vec2s"),_("number"!=typeof i||!i,"old style tile setup"),this.pos=e.copy(),this.size=t,this.drawSize=void 0,this.tileInfo=i,this.angle=s,this.color=r,this.additiveColor=void 0,this.mirror=!1,this.mass=eU,this.damping=eW,this.angleDamping=ej,this.elasticity=eB,this.friction=eG,this.gravityScale=1,this.renderOrder=n,this.velocity=em(),this.angleVelocity=0,this.spawnTime=sN,this.children=[],this.clampSpeedLinear=!0,this.parent=void 0,this.localPos=em(),this.localAngle=0,this.collideTiles=!1,this.collideSolidObjects=!1,this.isSolid=!1,this.collideRaycast=!1,sI.push(this)}updateTransforms(){let e=this.parent;if(e){let t=e.getMirrorSign();this.pos=this.localPos.multiply(em(t,1)).rotate(-e.angle).add(e.pos),this.angle=t*this.localAngle+e.angle}for(let e of this.children)e.updateTransforms()}update(){if(this.parent)return;if(this.clampSpeedLinear)this.velocity.x=$(this.velocity.x,-eF,eF),this.velocity.y=$(this.velocity.y,-eF,eF);else{let e=this.velocity.lengthSquared();if(e>eF*eF){let t=eF/e**.5;this.velocity.x*=t,this.velocity.y*=t}}let e=this.pos.copy();if(this.velocity.y+=eV*this.gravityScale,this.pos.x+=this.velocity.x*=this.damping,this.pos.y+=this.velocity.y*=this.damping,this.angle+=this.angleVelocity*=this.angleDamping,_(this.angleDamping>=0&&this.angleDamping<=1),_(this.damping>=0&&this.damping<=1),!ek||!this.mass)return;let t=this.velocity.y<0;if(this.groundObject){let e=this.groundObject.velocity?this.groundObject.velocity.x:0;this.velocity.x=e+(this.velocity.x-e)*this.friction,this.groundObject=0}if(this.collideSolidObjects)for(let i of sD){if(!this.isSolid&&!i.isSolid||i.destroyed||i.parent||i==this||!el(this.pos,this.size,i.pos,i.size))continue;let s=this.collideWithObject(i),r=i.collideWithObject(this);if(!s||!r)continue;if(el(e,this.size,i.pos,i.size)){let t=e.subtract(i.pos),s=t.length(),r=s<.01?ef(.001):t.scale(.001/s);this.velocity=this.velocity.add(r),i.mass&&(i.velocity=i.velocity.subtract(r)),b&&R&&W(this.pos,this.size,i.pos,i.size,"#f00");continue}let n=this.size.add(i.size),o=(e.y-i.pos.y)*2>n.y+eV,a=2*J(e.y-i.pos.y)<n.y,l=2*J(e.x-i.pos.x)<n.x,h=K(this.elasticity,i.elasticity);if(o||l||!a){if(this.pos.y=i.pos.y+(n.y/2+.001)*X(e.y-i.pos.y),i.groundObject&&t||!i.mass)t&&(this.groundObject=i),this.velocity.y*=-h;else if(i.mass){let e=(this.mass*this.velocity.y+i.mass*i.velocity.y)/(this.mass+i.mass),t=this.velocity.y*(this.mass-i.mass)/(this.mass+i.mass)+2*i.velocity.y*i.mass/(this.mass+i.mass),s=i.velocity.y*(i.mass-this.mass)/(this.mass+i.mass)+2*this.velocity.y*this.mass/(this.mass+i.mass);this.velocity.y=et(h,e,t),i.velocity.y=et(h,e,s)}}if(!o&&a){if(this.pos.x=i.pos.x+(n.x/2+.001)*X(e.x-i.pos.x),i.mass){let e=(this.mass*this.velocity.x+i.mass*i.velocity.x)/(this.mass+i.mass),t=this.velocity.x*(this.mass-i.mass)/(this.mass+i.mass)+2*i.velocity.x*i.mass/(this.mass+i.mass),s=i.velocity.x*(i.mass-this.mass)/(this.mass+i.mass)+2*this.velocity.x*this.mass/(this.mass+i.mass);this.velocity.x=et(h,e,t),i.velocity.x=et(h,e,s)}else this.velocity.x*=-h}b&&R&&W(this.pos,this.size,i.pos,i.size,"#f0f")}if(this.collideTiles&&iF(this.pos,this.size,this)&&!iF(e,this.size,this)){let i=iF(em(e.x,this.pos.y),this.size,this),s=iF(em(this.pos.x,e.y),this.size,this);if(i||!s){this.groundObject=t,this.velocity.y*=-this.elasticity;let i=(e.y-this.size.y/2|0)-(e.y-this.size.y/2);i<0&&i>this.damping*this.velocity.y+eV*this.gravityScale&&(this.velocity.y=this.damping?(i-eV*this.gravityScale)/this.damping:0),this.pos.y=e.y}s&&(this.pos.x=e.x,this.velocity.x*=-this.elasticity)}}render(){tX(this.pos,this.drawSize||this.size,this.tileInfo,this.color,this.angle,this.mirror,this.additiveColor)}destroy(){if(!this.destroyed)for(let e of(this.destroyed=1,this.parent&&this.parent.removeChild(this),this.children))e.destroy(e.parent=0)}localToWorld(e){return this.pos.add(e.rotate(-this.angle))}worldToLocal(e){return e.subtract(this.pos).rotate(this.angle)}localToWorldVector(e){return e.rotate(this.angle)}worldToLocalVector(e){return e.rotate(-this.angle)}collideWithTile(e,t){return e>0}collideWithObject(e){return!0}getAliveTime(){return sN-this.spawnTime}applyAcceleration(e){this.mass&&(this.velocity=this.velocity.add(e))}applyForce(e){this.applyAcceleration(e.scale(1/this.mass))}getMirrorSign(){return this.mirror?-1:1}addChild(e,t=em(),i=0){_(!e.parent&&!this.children.includes(e)),this.children.push(e),e.parent=this,e.localPos=t.copy(),e.localAngle=i}removeChild(e){_(e.parent==this&&this.children.includes(e)),this.children.splice(this.children.indexOf(e),1),e.parent=0}setCollision(e=!0,t=!0,i=!0,s=!0){_(e||!t,"solid objects must be set to collide"),this.collideSolidObjects=e,this.isSolid=t,this.collideTiles=i,this.collideRaycast=s}toString(){if(S){let e="type = "+this.constructor.name;return(this.pos.x||this.pos.y)&&(e+="\npos = "+this.pos),(this.velocity.x||this.velocity.y)&&(e+="\nvelocity = "+this.velocity),(this.size.x||this.size.y)&&(e+="\nsize = "+this.size),this.angle&&(e+="\nangle = "+this.angle.toFixed(3)),this.color&&(e+="\ncolor = "+this.color),e}}renderDebugInfo(){if(S){let e=em(K(this.size.x,.2),K(this.size.y,.2)),t=eA(this.collideTiles?1:0,this.collideSolidObjects?1:0,this.isSolid?1:0,this.parent?.2:.5),i=this.parent?eA(1,1,1,.5):eA(0,0,0,.8);tZ(this.pos,e,t,this.angle,!1),tZ(this.pos,e.scale(.8),i,this.angle,!1),this.parent&&t$(this.pos,this.parent.pos,.1,eA(0,0,1,.5),!1)}}}let tG=em(),tF=[];function tV(e=em(),t=eM,i=0){if(eC)return new tH;if("number"==typeof t&&(_(t>0),t=em(t)),"number"==typeof e){let s=tF[i];_(s,"Texture not loaded");let r=s.size.x/t.x|0;e=em(e%r*t.x,(e/r|0)*t.y)}return new tH(e,t,i)}class tH{constructor(e=em(),t=eM,i=0){this.pos=e.copy(),this.size=t.copy(),this.textureIndex=i}offset(e){return new tH(this.pos.add(e),this.size,this.textureIndex)}frame(e){return _("number"==typeof e),this.offset(em(e*this.size.x,0))}getTextureInfo(){return tF[this.textureIndex]}}class tq{constructor(e){this.image=e,this.size=em(e.width,e.height),this.glTexture=e_&&i6(e),this.fixBleedSize=em(eY).divide(this.size)}}function tJ(e){return new eE((e.x-tG.x/2+.5)/ew+eb.x,-((e.y-tG.y/2+.5)/ew)+eb.y)}function tQ(e){return new eE((e.x-eb.x)*ew+tG.x/2-.5,-((e.y-eb.y)*ew)+tG.y/2-.5)}function tK(){return tG.scale(1/ew)}function tX(e,t=em(1),i,s=new eO,r=0,n,o=new eO(0,0,0,0),l=e_,h,c){_(!c||!l,"context only supported in canvas 2D mode"),_("number"!=typeof i||!i,"this is an old style calls, to fix replace it with tile(tileIndex, tileSize)");let u=i&&i.getTextureInfo();if(l){if(h&&(e=tJ(e),t=t.scale(1/ew)),u){let a=i.pos.x/u.size.x,l=i.pos.y/u.size.y,h=i.size.x/u.size.x,c=i.size.y/u.size.y,d=u.fixBleedSize;i5(u.glTexture),i7(e.x,e.y,n?-t.x:t.x,t.y,r,a+d.x,l+d.y,a-d.x+h,l-d.y+c,s.rgbaInt(),o.rgbaInt())}else i7(e.x,e.y,t.x,t.y,r,0,0,0,0,0,s.rgbaInt())}else O&&++a,t0(e,t,r,n,e=>{if(u){let t=i.pos.x+eY,r=i.pos.y+eY,n=i.size.x-2*eY,o=i.size.y-2*eY;e.globalAlpha=s.a,e.drawImage(u.image,t,r,n,o,-.5,-.5,1,1),e.globalAlpha=1}else e.fillStyle=s,e.fillRect(-.5,-.5,1,1)},h,c)}function tZ(e,t,i,s,r,n,o){tX(e,t,void 0,i,s,!1,void 0,r,n,o)}function t$(e,t,i=.1,s,r,n,o){let a=em((t.x-e.x)/2,(t.y-e.y)/2),l=em(i,2*a.length());tZ(e.add(a),l,s,a.angle(),r,n,o)}function t0(e,t,i,s,n,o,a=r){o||(e=tQ(e),t=t.scale(ew)),a.save(),a.translate(e.x+.5,e.y+.5),a.rotate(i),a.scale(s?-t.x:t.x,-t.y),n(a),a.restore()}function t1(e,t=e_,i){_(!i||!t,"context only supported in canvas 2D mode"),t?E=e:(i||(i=r),i.globalCompositeOperation=e?"lighter":"source-over")}function t2(e,t,i=1,s,r=0,n,o,a,l){t5(e,tQ(t),i*ew,s,r*ew,n,o,a,l)}function t5(e,t,i=1,s=new eO,r=0,n=new eO(0,0,0),a="center",l=eL,h=o){h.fillStyle=s.toString(),h.lineWidth=r,h.strokeStyle=n.toString(),h.textAlign=a,h.font=i+"px "+l,h.textBaseline="middle",h.lineJoin="round",t=t.copy(),(e+"").split("\n").forEach(e=>{r&&h.strokeText(e,t.x,t.y),h.fillText(e,t.x,t.y),t.y+=i})}class t3{constructor(e,t=em(8),i=em(0,1),s=o){l||((l=new Image).src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAYAQAAAAA9+x6JAAAAAnRSTlMAAHaTzTgAAAGiSURBVHjaZZABhxxBEIUf6ECLBdFY+Q0PMNgf0yCgsSAGZcT9sgIPtBWwIA5wgAPEoHUyJeeSlW+gjK+fegWwtROWpVQEyWh2npdpBmTUFVhb29RINgLIukoXr5LIAvYQ5ve+1FqWEMqNKTX3FAJHyQDRZvmKWubAACcv5z5Gtg2oyCWE+Yk/8JZQX1jTTCpKAFGIgza+dJCNBF2UskRlsgwitHbSV0QLgt9sTPtsRlvJjEr8C/FARWA2bJ/TtJ7lko34dNDn6usJUMzuErP89UUBJbWeozrwLLncXczd508deAjLWipLO4Q5XGPcJvPu92cNDaN0P5G1FL0nSOzddZOrJ6rNhbXGmeDvO3TF7DeJWl4bvaYQTNHCTeuqKZmbjHaSOFes+IX/+IhHrnAkXOAsfn24EM68XieIECoccD4KZLk/odiwzeo2rovYdhvb2HYFgyznJyDpYJdYOmfXgVdJTaUi4xA2uWYNYec9BLeqdl9EsoTw582mSFDX2DxVLbNt9U3YYoeatBad1c2Tj8t2akrjaIGJNywKB/7h75/gN3vCMSaadIUTAAAAAElFTkSuQmCC"),this.image=e||l,this.tileSize=t,this.paddingSize=i,this.context=s}drawText(e,t,i=1,s){this.drawTextScreen(e,tQ(t).floor(),i*ew|0,s)}drawTextScreen(e,t,i=4,s){let r=this.context;r.save(),r.imageSmoothingEnabled=!eD;let n=this.tileSize,o=n.add(this.paddingSize).scale(i),a=this.image.width/this.tileSize.x|0;(e+"").split("\n").forEach((e,l)=>{let h=s?e.length*n.x*i/2|0:0;for(let s=e.length;s--;){let c=e[s].charCodeAt(0);(c<32||c>127)&&(c=127);let u=c-32,d=u%a,p=u/a|0,f=t.add(em(s,l).multiply(o));r.drawImage(this.image,d*n.x,p*n.y,n.x,n.y,f.x-h,f.y,n.x*i,n.y*i)}}),r.restore()}}function t4(){return!!document.fullscreenElement}function t6(){t4()?document.exitFullscreen&&document.exitFullscreen():document.body.requestFullscreen&&document.body.requestFullscreen()}function t9(e,t=0){return _(t>0||"number"!=typeof e||e<3,"use code string for keyboard"),ix[t]&&!!(1&ix[t][e])}function t8(e,t=0){return _(t>0||"number"!=typeof e||e<3,"use code string for keyboard"),ix[t]&&!!(2&ix[t][e])}function t7(e,t=0){return _(t>0||"number"!=typeof e||e<3,"use code string for keyboard"),ix[t]&&!!(4&ix[t][e])}function ie(){ix=[[]]}let it=t9,ii=t8,is=t7,ir=em(),io=em(),ia=0,il=!1,ih=!1;function ic(e,t=0){return t9(e,t+1)}function iu(e,t=0){return t8(e,t+1)}function id(e,t=0){return t7(e,t+1)}function ip(e,t=0){return iT[t]&&iT[t][e]||em()}let ix=[[]];function ig(){eC||(eK&&iS||document.hasFocus()||ie(),ir=tJ(io),iE())}function iy(){if(!eC){for(let e of ix)for(let t in e)e[t]&=1;ia=0}}function im(e){if(!s||eC)return em();let t=s.getBoundingClientRect();return em(s.width,s.height).multiply(em(ee(e.x,t.left,t.right),ee(e.y,t.top,t.bottom)))}let iT=[];function iE(){let e=e=>{let t=e=>e>.3?ee(e,.3,.8):e<-.3?-ee(-e,.3,.8):0;return em(t(e.x),t(-e.y)).clampLength()};if(eX&&iS&&(_(iP,"set touchGamepadEnable before calling init!"),iO.isSet())){let t=iT[0]||(iT[0]=[]);t[0]=em(),eZ?t[0]=e(ib):ib.lengthSquared()>.3&&(t[0].x=Math.round(ib.x),t[0].y=-Math.round(ib.y),t[0]=t[0].clampLength());let i=ix[1]||(ix[1]=[]);for(let e=10;e--;){let t=3==e?2:2==e?3:e,s=ic(t,0);i[t]=iP[e]?s?1:3:s?4:0}}if(!eq||!navigator||!navigator.getGamepads||!S&&!document.hasFocus())return;let t=navigator.getGamepads();for(let i=t.length;i--;){let s=t[i],r=ix[i+1]||(ix[i+1]=[]),n=iT[i]||(iT[i]=[]);if(s){for(let t=0;t<s.axes.length-1;t+=2)n[t>>1]=e(em(s.axes[t],s.axes[t+1]));for(let e=s.buttons.length;e--;){let t=s.buttons[e],n=ic(e,i);r[e]=t.pressed?n?1:3:n?4:0,il||=!i&&t.pressed}if(eJ){let e=em((ic(15,i)&&1)-(ic(14,i)&&1),(ic(12,i)&&1)-(ic(13,i)&&1));e.lengthSquared()&&(n[0]=e.clampLength())}eX&&il&&iO.unset()}}}function iA(e=100){e1&&!eC&&navigator&&navigator.vibrate&&navigator.vibrate(e)}function iv(){iA(0)}let iS=void 0!==window.ontouchstart,iO=new eP,iP,ib;class iw{constructor(e,t=e3,i=e4){if(!e2||eC)return;this.range=t,this.taper=i,this.randomness=0,e&&(this.randomness=e[1]||.05,this.sampleChannels=[ik(...e)],this.sampleRate=iY)}play(e,t=1,i=1,r=1,n=!1){let o;if(!e2||eC||!this.sampleChannels)return;if(e){let i=this.range;if(i){let s=eb.distanceSquared(e);if(s>i*i)return;t*=ee(s**.5,i,i*this.taper)}o=2*tQ(e).x/s.width-1}let a=i+i*this.randomness*r*eu(-1,1);return this.gainNode=h.createGain(),this.source=iz(this.sampleChannels,t,a,o,n,this.sampleRate,this.gainNode)}setVolume(e=1){this.gainNode&&(this.gainNode.gain.value=e)}stop(){this.source&&this.source.stop(),this.source=void 0}getSource(){return this.source}playNote(e,t,i){return this.play(t,i,2**(e/12),0)}getDuration(){return this.sampleChannels&&this.sampleChannels[0].length/this.sampleRate}isLoading(){return!this.sampleChannels}}class iR extends iw{constructor(e,t=0,i,s,r){if(super(void 0,i,s),!e2||eC)return;this.randomness=t,fetch(e).then(e=>e.arrayBuffer()).then(e=>h.decodeAudioData(e)).then(e=>{this.sampleChannels=[];for(let t=e.numberOfChannels;t--;)this.sampleChannels[t]=Array.from(e.getChannelData(t));this.sampleRate=e.sampleRate}).then(()=>r&&r(this))}}function iI(e,t=1,i=!1){if(e2&&!eC)return new iR(e,0,0,0,e=>e.play(void 0,t,1,1,i))}class iD extends iw{constructor(e){if(super(void 0),!e2||eC)return;this.randomness=0,this.sampleChannels=function(e,t,i,s=125){let r,n,o,a,l,h,c,u,d,p,f,x,g,y;let m=0,T=[],E=[],A=[],v=0,S=0,O=1,P={},b=iY/s*60>>2;for(;O;v++)T=[O=u=x=0],i.forEach((s,w)=>{for(c=t[s][v]||[0,0,0],O|=t[s][v]&&1,y=x+(t[s][0].length-2-(u?0:1))*b,g=w==i.length-1,r=2,o=x;r<c.length+g;u=++r){for(n=0,l=c[r],d=r==c.length+g-1&&g||p!=(c[0]||0)||0|l;n<b&&u;n++>b-99&&d&&f<1&&(f+=1/99))h=(1-f)*T[m++]/2||0,E[o]=(E[o]||0)-h*S+h,A[o]=(A[o++]||0)+h*S+h;l&&(f=l%1,S=c[1]||0,(l|=0)&&(T=P[[p=c[m=0]||0,l]]=P[[p,l]]||(a=[...e[p]],a[2]*=2**((l-12)/12),l>0?ik(...a):[])))}x=y});return[E,A]}(...e),this.sampleRate=iY}playMusic(e,t=!1){return super.play(void 0,e,1,1,t)}}function iL(e,t="",i=1,s=1,r=1){if(!e2||eC||!speechSynthesis)return;let n=new SpeechSynthesisUtterance(e);return n.lang=t,n.volume=2*i*e5,n.rate=s,n.pitch=r,speechSynthesis.speak(n),n}function iN(){speechSynthesis&&speechSynthesis.cancel()}function iC(e,t=220){return t*2**(e/12)}let i_=!1;function iz(e,t=1,i=1,s=0,r=!1,n=iY,o){if(!e2||eC)return;let a=i_;if((i_="running"!=h.state)&&(h.resume(),a))return;let l=h.createBuffer(e.length,e[0].length,n),u=h.createBufferSource();return e.forEach((e,t)=>l.getChannelData(t).set(e)),u.buffer=l,u.playbackRate.value=i,u.loop=r,(o=o||h.createGain()).gain.value=t,o.connect(c),u.connect(new StereoPannerNode(h,{pan:$(s,-1,1)})).connect(o),u.start(),u}function iM(...e){return new iw(e).play()}let iY=44100;function ik(e=1,t=0,i=220,s=0,r=0,n=.1,o=0,a=1,l=0,h=0,c=0,u=0,d=0,p=0,f=0,x=0,g=0,y=1,m=0,T=0,E=0){let A=2*q,v=l*=500*A/iY/iY,S=i*=A/iY,O=[],P=0,b=0,w=0,R=1,I=0,D=0,L=0,N,C,_=A*J(E)*2/iY,z=Math.cos(_),M=Math.sin(_)/2/2,Y=1+M,k=-2*z/Y,U=(1-M)/Y,W=(1+X(E)*z)/2/Y,j=-(X(E)+z)/Y,B=0,G=0,F=0,V=0;for(s=s*iY+9,m*=iY,r*=iY,n*=iY,g*=iY,h*=500*A/iY**3,f*=A/iY,c*=A/iY,u*=iY,d=d*iY|0,C=s+m+r+n+g|0;w<C;O[w++]=L*e)!(++D%(100*x|0))&&(L=o?o>1?o>2?o>3?Math.sin(P**3):$(Math.tan(P),1,-1):1-(2*P/A%2+2)%2:1-4*J(Math.round(P/A)-P/A):Math.sin(P),L=(d?1-T+T*Math.sin(A*w/d):1)*X(L)*J(L)**a*(w<s?w/s:w<s+m?1-(w-s)/m*(1-y):w<s+m+r?y:w<C-g?(C-w-g)/n*y:0),L=g?L/2+(g>w?0:(w<C-g?1:(C-w)/g)*O[w-g|0]/2/e):L,E&&(L=V=W*B+j*(B=G)+W*(G=L)-U*F-k*(F=V))),P+=(N=(i+=l+=h)*Math.cos(f*b++))+N*p*Math.sin(w**5),R&&++R>u&&(i+=c,S+=c,R=0),d&&!(++I%d)&&(i=S,l=v,R=R||1);return O}let iU=[],iW=em();function ij(e){iW=e,iU=[];for(let e=iU.length=iW.area();e--;)iU[e]=0}function iB(e,t=0){e.arrayCheck(iW)&&(iU[(0|e.y)*iW.x+e.x|0]=t)}function iG(e){return e.arrayCheck(iW)?iU[(0|e.y)*iW.x+e.x|0]:0}function iF(e,t=em(),i){let s=K(e.x-t.x/2|0,0),r=K(e.y-t.y/2|0,0),n=Q(e.x+t.x/2,iW.x),o=Q(e.y+t.y/2,iW.y);for(let e=r;e<o;++e)for(let t=s;t<n;++t){let s=iU[e*iW.x+t];if(s&&(!i||i.collideWithTile(s,em(t,e))))return!0}}function iV(e,t,i){let s=t.subtract(e),r=s.length(),n=s.normalize(),o=em(J(1/n.x),J(1/n.y)),a=e.floor(),l=o.x*(s.x<0?e.x-a.x:a.x-e.x+1),h=o.y*(s.y<0?e.y-a.y:a.y-e.y+1);for(;;){let n=iG(a);if(n&&(!i||i.collideWithTile(n,a)))return I&&U(e,t,"#f00",.02),I&&k(a.add(em(.5)),"#ff0"),a.add(em(.5));if(l>r&&h>r)break;l>h?(a.y+=X(s.y),h+=o.y):(a.x+=X(s.x),l+=o.x)}I&&U(e,t,"#00f",.02)}class iH{constructor(e,t=0,i=!1,s=new eO){this.tile=e,this.direction=t,this.mirror=i,this.color=s}clear(){this.tile=this.direction=0,this.mirror=!1,this.color=new eO}}class iq extends tB{constructor(e,t=iW,i=tV(),s=em(1),r=0){super(e,t,i,0,void 0,r),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.scale=s,this.isOverlay=!1,this.data=[];for(let e=this.size.area();e--;)this.data.push(new iH);eC&&(this.redraw=()=>{},this.render=()=>{},this.redrawStart=()=>{},this.redrawEnd=()=>{},this.drawTileData=()=>{},this.drawCanvas2D=()=>{})}setData(e,t,i=!1){e.arrayCheck(this.size)&&(this.data[(0|e.y)*this.size.x+e.x|0]=t,i&&this.drawTileData(e))}getData(e){return e.arrayCheck(this.size)&&this.data[(0|e.y)*this.size.x+e.x|0]}update(){}render(){_(r!=this.context,"must call redrawEnd() after drawing tiles"),ez||this.isOverlay||i8(r);let e=tQ(this.pos.add(em(0,this.size.y*this.scale.y)));(this.isOverlay?o:r).drawImage(this.canvas,e.x,e.y,ew*this.size.x*this.scale.x,ew*this.size.y*this.scale.y)}redraw(){this.redrawStart(!0);for(let e=this.size.x;e--;)for(let t=this.size.y;t--;)this.drawTileData(em(e,t),!1);this.redrawEnd()}redrawStart(e=!1){this.savedRenderSettings=[s,r,tG,eb,ew],s=this.canvas,r=this.context,tG=this.size.multiply(this.tileInfo.size),eb=this.size.scale(.5),ew=this.tileInfo.size.x,e&&(s.width=tG.x,s.height=tG.y),this.context.imageSmoothingEnabled=!eD,i2()}redrawEnd(){_(r==this.context,"must call redrawStart() before drawing tiles"),i8(r,!0),[s,r,tG,eb,ew]=this.savedRenderSettings}drawTileData(e,t=!0){let i=this.tileInfo.size;if(t){let t=e.multiply(i);this.context.clearRect(t.x,this.canvas.height-t.y,i.x,-i.y)}let s=this.getData(e);if(void 0!=s.tile){let t=this.pos.add(e).add(em(.5));_(r==this.context,"must call redrawStart() before drawing tiles");let n=tV(s.tile,i,this.tileInfo.textureIndex);tX(t,em(1),n,s.color,s.direction*q/2,s.mirror)}}drawCanvas2D(e,t,i,s,r){let n=this.context;n.save(),e=e.subtract(this.pos).multiply(this.tileInfo.size),t=t.multiply(this.tileInfo.size),n.translate(e.x,this.canvas.height-e.y),n.rotate(i),n.scale(s?-t.x:t.x,t.y),r(n),n.restore()}drawTile(e,t=em(1),i,s=new eO,r,n){this.drawCanvas2D(e,t,r,n,e=>{let t=i&&i.getTextureInfo();t?(e.globalAlpha=s.a,e.drawImage(t.image,i.pos.x,i.pos.y,i.size.x,i.size.y,-.5,-.5,1,1),e.globalAlpha=1):(e.fillStyle=s,e.fillRect(-.5,-.5,1,1))})}drawRect(e,t,i,s){this.drawTile(e,t,void 0,i,s)}}class iJ extends tB{constructor(e,t,i=0,s=0,r=100,n=q,o,a=new eO,l=new eO,h=new eO(1,1,1,0),c=new eO(1,1,1,0),u=.5,d=.1,p=1,f=.1,x=.05,g=1,y=1,m=0,T=q,E=.1,A=.2,v=!1,S=!1,O=!0,P=S?1e9:0,b=!1){super(e,em(),o,t,void 0,P),this.emitSize=i,this.emitTime=s,this.emitRate=r,this.emitConeAngle=n,this.colorStartA=a,this.colorStartB=l,this.colorEndA=h,this.colorEndB=c,this.randomColorLinear=O,this.particleTime=u,this.sizeStart=d,this.sizeEnd=p,this.speed=f,this.angleSpeed=x,this.damping=g,this.angleDamping=y,this.gravityScale=m,this.particleConeAngle=T,this.fadeRate=E,this.randomness=A,this.collideTiles=v,this.additive=S,this.localSpace=b,this.trailScale=0,this.particleDestroyCallback=void 0,this.particleCreateCallback=void 0,this.emitTimeBuffer=0}update(){if(this.parent&&super.update(),!this.emitTime||this.getAliveTime()<=this.emitTime){if(this.emitRate*eH){let e=1/this.emitRate/eH;for(this.emitTimeBuffer+=sR;this.emitTimeBuffer>0;this.emitTimeBuffer-=e)this.emitParticle()}}else this.destroy();D&&z(this.pos,em(this.emitSize),"#0f0",0,this.angle)}emitParticle(){let e="number"==typeof this.emitSize?ex(this.emitSize/2):em(eu(-.5,.5),eu(-.5,.5)).multiply(this.emitSize).rotate(this.angle),t=eu(this.particleConeAngle,-this.particleConeAngle);this.localSpace||(e=this.pos.add(e),t+=this.angle);let i=this.randomness,s=e=>e+e*eu(i,-i),r=s(this.particleTime),n=s(this.sizeStart),o=s(this.sizeEnd),a=s(this.speed),l=s(this.angleSpeed)*ep(),h=eu(this.emitConeAngle,-this.emitConeAngle),c=eg(this.colorStartA,this.colorStartB,this.randomColorLinear),u=eg(this.colorEndA,this.colorEndB,this.randomColorLinear),d=this.localSpace?h:this.angle+h,p=new iQ(e,this.tileInfo,t,c,u,r,n,o,this.fadeRate,this.additive,this.trailScale,this.localSpace&&this,this.particleDestroyCallback);return p.velocity=em().setAngle(d,a),p.angleVelocity=l,p.fadeRate=this.fadeRate,p.damping=this.damping,p.angleDamping=this.angleDamping,p.elasticity=this.elasticity,p.friction=this.friction,p.gravityScale=this.gravityScale,p.collideTiles=this.collideTiles,p.renderOrder=this.renderOrder,p.mirror=!!ed(2),this.particleCreateCallback&&this.particleCreateCallback(p),p}render(){}}class iQ extends tB{constructor(e,t,i,s,r,n,o,a,l,h,c,u,d){super(e,em(),t,i),this.colorStart=s,this.colorEndDelta=r.subtract(s),this.lifeTime=n,this.sizeStart=o,this.sizeEndDelta=a-o,this.fadeRate=l,this.additive=h,this.trailScale=c,this.localSpaceEmitter=u,this.destroyCallback=d,this.clampSpeedLinear=!1}render(){let e=Q((sN-this.spawnTime)/this.lifeTime,1),t=em(this.sizeStart+e*this.sizeEndDelta),i=this.fadeRate/2,s=new eO(this.colorStart.r+e*this.colorEndDelta.r,this.colorStart.g+e*this.colorEndDelta.g,this.colorStart.b+e*this.colorEndDelta.b,(this.colorStart.a+e*this.colorEndDelta.a)*(e<i?e/i:e>1-i?(1-e)/i:1));this.additive&&t1(!0);let r=this.pos,n=this.angle;if(this.localSpaceEmitter&&(r=this.localSpaceEmitter.pos.add(r.rotate(-this.localSpaceEmitter.angle)),n+=this.localSpaceEmitter.angle),this.trailScale){let e=this.velocity;this.localSpaceEmitter&&(e=e.rotate(-this.localSpaceEmitter.angle));let i=e.length();if(i){let o=e.scale(1/i),a=i*this.trailScale;t.y=K(t.x,a),n=o.angle(),tX(r.add(o.multiply(em(0,-a/2))),t,this.tileInfo,s,n,this.mirror)}}else tX(r,t,this.tileInfo,s,n,this.mirror);this.additive&&t1(),D&&z(r,t,"#f005",0,n),1==e&&(this.color=s,this.size=t,this.destroyCallback&&this.destroyCallback(this),this.destroyed=1)}}let iK={},iX=[],iZ,i$;function i0(e){var t;iZ=e,t=e=>e.unlocked=0|localStorage[e.storageKey()],Object.values(iK).forEach(e=>t(e)),sj(void 0,function(){if(!iX.length)return;let e=iX[0],t=sC-i$;if(i$){if(t>e6)i$=0,iX.shift();else{let i=e6-e9,s=t<e9?1-t/e9:t>i?(t-i)/e9:0;e.render(s)}}else i$=sC})}class i1{constructor(e,t,i="",s="\uD83C\uDFC6",r){_(e>=0&&!iK[e]),iK[this.id=e]=this,this.name=t,this.description=i,this.icon=s,r&&((this.image=new Image).src=r)}unlock(){te||this.unlocked||(_(iZ,"save name must be set"),localStorage[this.storageKey()]=this.unlocked=1,iX.push(this))}render(e=0){let t=o,i=Q(e8.x,s.width),r=n.width-i,a=-e8.y*e;t.save(),t.beginPath(),t.fillStyle=new eO(.9,.9,.9).toString(),t.strokeStyle=new eO(0,0,0).toString(),t.lineWidth=3,t.rect(r,a,i,e8.y),t.fill(),t.stroke(),t.clip(),this.renderIcon(em(r+15+e7/2,a+e8.y/2));let l=em(r+e7+30,a+28);t5(this.name,l,38,new eO(0,0,0),0,void 0,"left"),l.y+=32,t5(this.description,l,24,new eO(0,0,0),0,void 0,"left"),t.restore()}renderIcon(e,t=e7){this.image?o.drawImage(this.image,e.x-t/2,e.y-t/2,t,t):t5(this.icon,e,.7*t,new eO(0,0,0))}storageKey(){return iZ+"_"+this.id}}function i2(){if(!e_||eC)return;d.viewport(0,0,u.width=s.width,u.height=s.height),d.clear(sp),d.useProgram(p),d.activeTexture(sf),d.bindTexture(sn,f=tF[0].glTexture);let e=E=A=0,t=(t,i,s,r)=>{let n=d.getAttribLocation(p,t),o=s&&sS,a=s&&1,l=1==s;d.enableVertexAttribArray(n),d.vertexAttribPointer(n,r,i,l,o,e),d.vertexAttribDivisor(n,a),e+=r*s};d.bindBuffer(sx,g),t("g",sa,0,2),d.bindBuffer(sx,x),d.bufferData(sx,sO,sg),t("p",sa,4,4),t("u",sa,4,4),t("c",so,1,4),t("a",so,1,4),t("r",sa,4,1);let i=em(2*ew).divide(tG),r=em(-1).subtract(eb.multiply(i));d.uniformMatrix4fv(d.getUniformLocation(p,"m"),!1,[i.x,0,0,0,0,i.y,0,0,1,1,1,1,r.x,r.y,0,0])}function i5(e){eC||e==f||(i9(),d.bindTexture(sn,f=e))}function i3(e,t){let i=d.createShader(t);if(d.shaderSource(i,e),d.compileShader(i),S&&!d.getShaderParameter(i,sT))throw d.getShaderInfoLog(i);return i}function i4(e,t){let i=d.createProgram();if(d.attachShader(i,i3(e,sm)),d.attachShader(i,i3(t,sy)),d.linkProgram(i),S&&!d.getProgramParameter(i,sE))throw d.getProgramInfoLog(i);return i}function i6(e){let t=d.createTexture();d.bindTexture(sn,t),e&&d.texImage2D(sn,0,sl,sl,so,e);let i=eD?sh:sc;return d.texParameteri(sn,sd,i),d.texParameteri(sn,su,i),t}function i9(){if(!T)return;let e=A?se:ss;d.blendFuncSeparate(si,e,se,e),d.enable(sr),d.bufferSubData(sx,0,y),d.drawArraysInstanced(st,0,4,T),O&&(a+=T),T=0,A=E}function i8(e,t=!1){e_&&(T||t)&&(i9(),(!ez||t)&&e.drawImage(u,0,0))}function i7(e,t,i,s,r,n,o,a,l,h,c=0){_("number"==typeof h&&"number"==typeof c,"invalid color"),(T>=sv||A!=E)&&i9();let u=T*sA;y[u++]=e,y[u++]=t,y[u++]=i,y[u++]=s,y[u++]=n,y[u++]=o,y[u++]=a,y[u++]=l,m[u++]=h,m[u++]=c,y[u++]=r,T++}let se=1,st=5,si=770,ss=771,sr=3042,sn=3553,so=5121,sa=5126,sl=6408,sh=9728,sc=9729,su=10240,sd=10241,sp=16384,sf=33984,sx=34962,sg=35048,sy=35632,sm=35633,sT=35713,sE=35714,sA=11,sv=1e4,sS=44,sO=44e4,sP="LittleJS",sb="1.9.9",sw=60,sR=.016666666666666666,sI=[],sD=[],sL=0,sN=0,sC=0,s_=!1;function sz(e){s_=e}let sM=0,sY=0,sk=0,sU=[],sW=[];function sj(e,t){e&&sU.push(e),t&&sW.push(t)}function sB(e,t,i,l,f,E=["tiles.png"]){function A(){if(!eC){if(eI.x){s.width=eI.x,s.height=eI.y;let e=innerWidth/innerHeight,t=s.width/s.height;(u||s).style.width=s.style.width=n.style.width=e<t?"100%":"",(u||s).style.height=s.style.height=n.style.height=e<t?"":"100%"}else s.width=Q(innerWidth,eR.x),s.height=Q(innerHeight,eR.y);n.width=s.width,n.height=s.height,tG=em(s.width,s.height)}}function v(){e(),function e(h=0){let c=h-sM;sM=h,(S||O)&&(sk=et(.05,sk,1e3/(c||1)));let u=S&&t9("Equal"),d=S&&t9("Minus");if(S&&(c*=u?5:d?.2:1),sC+=c/1e3,sY+=s_?0:c,u||(sY=Q(sY,50)),A(),s_){for(let e of sI)e.parent||e.updateTransforms();ig(),H(),i(),iy()}else{let e=0;for(sY<0&&sY>-9&&(e=sY,sY=0);sY>=0;sY-=1e3/sw)sN=sL++/sw,ig(),t(),sU.forEach(e=>e()),sG(),H(),i(),iy();sY+=e}if(!eC){for(let e of(tG=em(s.width,s.height),r.imageSmoothingEnabled=!eD,i2(),l(),sI.sort((e,t)=>e.renderOrder-t.renderOrder),sI))e.destroyed||e.render();if(f(),sW.forEach(e=>e()),function(){if(!eK||!iS||eC||!eX||!iO.isSet())return;let e=ee(iO.get(),4,3);if(!e||s_)return;let t=o;t.save(),t.globalAlpha=e*e0,t.strokeStyle="#fff",t.lineWidth=3,t.fillStyle=ib.lengthSquared()>0?"#fff":"#000",t.beginPath();let i=em(e$,tG.y-e$);if(eZ)t.arc(i.x,i.y,e$/2,0,9),t.fill(),t.stroke();else{for(let e=10;e--;){let s=e*q/4;t.arc(i.x,i.y,.6*e$,s+q/8,s+q/8),e%2&&t.arc(i.x,i.y,.33*e$,s,s),1==e&&t.fill()}t.stroke()}let s=em(tG.x-e$,tG.y-e$);for(let e=4;e--;){let i=s.add(em().setDirection(e,e$/2));t.fillStyle=iP[e]?"#fff":"#000",t.beginPath(),t.arc(i.x,i.y,e$/4,0,9),t.fill(),t.stroke()}t.restore()}(),function(){let e;if(i8(r),N){i8(r,!0),r.drawImage(n,0,0),n.width|=0;let e=s.width,t=s.height;o.fillRect(0,0,e,t),o.drawImage(s,0,0),G(n),N=0}if(L&&eq&&navigator.getGamepads){let e=navigator.getGamepads();for(let t=e.length;t--;){let i=e[t];if(i){let e=eb,s=iT[t];for(let i=s.length;i--;){let r=e.add(em(2*i,3*t)),n=r.add(s[i].scale(1));Y(r,1,"#fff7",0,!0),U(r,n,"#f00"),k(n,"#f00")}for(let s=i.buttons.length;s--;){let r=e.add(em(.4*s,3*t-1-.2));Y(r,.2,i.buttons[s].pressed?"#f00":"#fff7",0,!0),j(""+s,r,.2)}}}}if(b){let t=r;r=o;let i=tK();z(eb,i.subtract(em(.1)),"#f008");let s=1/0;for(let t of sI){if(t.canvas||t.destroyed||(t.renderDebugInfo(),!t.size.x||!t.size.y))continue;let i=ir.distanceSquared(t.pos);i<s&&(s=i,e=t)}iW.x>0&&iW.y>0&&tZ(ir.floor().add(em(.5)),em(1),eA(0,0,1,.5),0,!1),r=t}{o.lineWidth=2;let e=.5*ew;w.forEach(t=>{o.save();let i=tQ(t.pos);if(o.translate(0|i.x,0|i.y),o.rotate(t.angle),o.scale(1,-1),o.fillStyle=o.strokeStyle=t.color,void 0!=t.text)o.font=t.size*ew+"px "+t.font,o.textAlign="center",o.textBaseline="middle",o.fillText(t.text,0,0);else if(void 0!=t.points){for(let e of(o.beginPath(),t.points)){let t=e.scale(ew).floor();o.lineTo(t.x,t.y)}o.closePath(),t.fill&&o.fill(),o.stroke()}else if(0==t.size||0===t.size.x&&0===t.size.y)o.fillRect(-e/2,-1,e,3),o.fillRect(-1,-e/2,3,e);else if(void 0!=t.size.x){let e=t.size.scale(ew).floor(),i=e.x,s=e.y;t.fill&&o.fillRect(-i/2|0,-s/2|0,i,s),o.strokeRect(-i/2|0,-s/2|0,i,s)}else o.beginPath(),o.arc(0,0,t.size*ew,0,9),t.fill&&o.fill(),o.stroke();o.restore()}),w=w.filter(e=>e.time<0)}if(e){let t=r;r=o;let i=iV(e.pos,ir);i&&tZ(i.floor().add(em(.5)),em(1),eA(0,1,1,.3)),t$(ir,e.pos,.1,i?eA(1,0,0,.5):eA(0,1,0,.5),!1),t5("mouse pos = "+ir+"\nmouse collision = "+iG(ir)+"\n\n--- object info ---\n"+e.toString(),io,24,eA(),.05,void 0,"center","monospace"),r=t}{o.save(),o.fillStyle="#fff",o.textAlign="left",o.textBaseline="top",o.font="28px monospace",o.shadowColor="#000",o.shadowBlur=9;let e=-20;if(b){o.fillText(sP,9,e+=30),o.fillText("Objects: "+sI.length,9,e+=30),o.fillText("Time: "+ec(sN),9,e+=30),o.fillText("---------",9,e+=30),o.fillStyle="#f00",o.fillText("ESC: Debug Overlay",9,e+=30),o.fillStyle=R?"#f00":"#fff",o.fillText("1: Debug Physics",9,e+=30),o.fillStyle=D?"#f00":"#fff",o.fillText("2: Debug Particles",9,e+=30),o.fillStyle=L?"#f00":"#fff",o.fillText("3: Debug Gamepads",9,e+=30),o.fillStyle=I?"#f00":"#fff",o.fillText("4: Debug Raycasts",9,e+=30),o.fillStyle="#fff",o.fillText("5: Save Screenshot",9,e+=30);let t="";for(let e in ix[0])t9(e,0)&&(t+=e+" ");t&&o.fillText("Keys Down: "+t,9,e+=30);let i="";if(ix[1])for(let e in ix[1])t9(e,1)&&(i+=e+" ");i&&o.fillText("Gamepad: "+i,9,e+=30)}else o.fillText(R?"Debug Physics":"",9,e+=30),o.fillText(D?"Debug Particles":"",9,e+=30),o.fillText(I?"Debug Raycasts":"",9,e+=30),o.fillText(L?"Debug Gamepads":"",9,e+=30);o.restore()}}(),i8(r),O){o.textAlign="right",o.textBaseline="top",o.font="1em monospace",o.fillStyle="#000";let e=sP+" v"+sb+" / "+a+" / "+sI.length+" / "+sk.toFixed(1)+(e_?" GL":" 2D");o.fillText(e,s.width-3,3),o.fillStyle="#fff",o.fillText(e,s.width-2,2),a=0}}requestAnimationFrame(e)}()}if(_(Array.isArray(E),"pass in images as array"),eC){v();return}let P="margin:0;overflow:hidden;background:#000;user-select:none;-webkit-user-select:none;"+(eK?"touch-action:none;-webkit-touch-callout:none":"");document.body.style.cssText=P,document.body.appendChild(s=document.createElement("canvas")),r=s.getContext("2d"),function(){!eC&&(onkeydown=t=>{(!S||t.target==document.body)&&(!t.repeat&&(il=!1,ix[0][t.code]=3,eQ&&(ix[0][e(t.code)]=3)),ih&&t.preventDefault())},onkeyup=t=>{(!S||t.target==document.body)&&(ix[0][t.code]=4,eQ&&(ix[0][e(t.code)]=4))},onmousedown=e=>{il=!1,ix[0][e.button]=3,io=im(e),e.button&&e.preventDefault()},onmouseup=e=>ix[0][e.button]=2&ix[0][e.button]|4,onmousemove=e=>io=im(e),onwheel=e=>ia=e.ctrlKey?0:X(e.deltaY),oncontextmenu=e=>!1,iS&&eK&&!eC&&function(){let e,t=i;function i(t){e2&&h&&"running"!=h.state&&iM(0);let i=t.touches.length;return i?(io=im(em(t.touches[0].clientX,t.touches[0].clientY)),e?il=!1:ix[0][0]=3):e&&(ix[0][0]=2&ix[0][0]|4),e=i,document.hasFocus()&&t.preventDefault(),!0}eX&&(t=function(e){if(ib=em(),iP=[],il=!0,e.touches.length&&(iO.set(),s_)){iP[9]=1;return}let t=em(e$,tG.y-e$),s=tG.subtract(em(e$,e$)),r=tG.scale(.5);for(let i of e.touches){let e=im(em(i.clientX,i.clientY));e.distance(t)<e$?ib=e.subtract(t).scale(2/e$).clampLength():e.distance(s)<e$?iP[e.subtract(s).direction()]=1:e.distance(r)<e$&&(iP[9]=1)}return i(e),!0},iP=[],ib=em()),document.addEventListener("touchstart",e=>t(e),{passive:!1}),document.addEventListener("touchmove",e=>t(e),{passive:!1}),document.addEventListener("touchend",e=>t(e),{passive:!1}),onmousedown=onmouseup=()=>0}());function e(e){return eQ?"KeyW"==e?"ArrowUp":"KeyS"==e?"ArrowDown":"KeyA"==e?"ArrowLeft":"KeyD"==e?"ArrowRight":e:e}}(),!e2||eC||((c=(h=new AudioContext).createGain()).connect(h.destination),tN(e5)),C=document.createElement("a"),function(){if(!e_||eC)return;d=(u=document.createElement("canvas")).getContext("webgl2"),ez&&document.body.appendChild(u),p=i4("#version 300 es\nprecision highp float;uniform mat4 m;in vec2 g;in vec4 p,u,c,a;in float r;out vec2 v;out vec4 d,e;void main(){vec2 s=(g-.5)*p.zw;gl_Position=m*vec4(p.xy+s*cos(r)-vec2(-s.y,s)*sin(r),1,1);v=mix(u.xw,u.zy,g);d=c;e=a;}","#version 300 es\nprecision highp float;uniform sampler2D s;in vec2 v;in vec4 d,e;out vec4 c;void main(){c=texture(s,v)*d+e;}");let e=new ArrayBuffer(sO);y=new Float32Array(e),m=new Uint32Array(e),x=d.createBuffer(),g=d.createBuffer();let t=new Float32Array([T=0,0,1,0,0,1,1,1]);d.bindBuffer(sx,g),d.bufferData(sx,t,35044)}(),document.body.appendChild(n=document.createElement("canvas")),o=n.getContext("2d"),(u||s).style.cssText=s.style.cssText=n.style.cssText="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)",A();let M=E.map((e,t)=>new Promise(i=>{let s=new Image;s.onerror=s.onload=()=>{tF[t]=new tq(s),i()},s.src=e}));eN&&M.push(new Promise(e=>{let t=0;console.log(`${sP} Engine v${sb}`),function i(){ie(),function(e){let t=o,i=n.width=innerWidth,s=n.height=innerHeight;{let r=ee(e,1,.8),n=ee(e,0,.5),o=t.createRadialGradient(i/2,s/2,0,i/2,s/2,.7*Math.hypot(i,s));o.addColorStop(0,ev(0,0,et(n,0,r/2),r).toString()),o.addColorStop(1,ev(0,0,0,r).toString()),t.save(),t.fillStyle=o,t.fillRect(0,0,i,s)}let r=(e,i,s,r,n)=>{t.beginPath(),t.rect(e,i,s,n?r*u:r),t.fillStyle=n,n?t.fill():t.stroke()},a=(e,i,s,r)=>{t.beginPath(),t.lineTo(e,i),t.lineTo(s,r),t.stroke()},l=(e,i,s,r=0,n=2*q,o,a)=>{let l=(r+n)/2,h=u*(n-r)/2;t.beginPath(),a&&t.lineTo(e,i),t.arc(e,i,s,l-h,l+h),t.fillStyle=o,o?t.fill():t.stroke()},h=(e=0,t=0)=>ev([.98,.3,.57,.14][e%4]-10,.8,[0,.3,.5,.8,.9][t]).toString(),c=eh(1,1,e),u=ee(c,.1,.5);t.translate(i/2,s/2);let d=Q(6,Q(i,s)/99);t.scale(d,d),t.translate(-40,-35),t.lineJoin=t.lineCap="round",t.lineWidth=.1+1.9*u;let p=ee(c,.1,1);t.setLineDash([99*p,99]),r(7,16,18,-8,h(2,2)),r(7,8,18,4,h(2,3)),r(25,8,8,8,h(2,1)),r(25,8,-18,8),r(25,8,8,8),r(25,16,7,23,h()),r(11,39,14,-23,h(1,1)),r(11,16,14,18,h(1,2)),r(11,16,14,8,h(1,3)),r(25,16,-14,24),r(15,29,6,-9,h(2,2)),l(15,21,5,0,q/2,h(2,4),1),r(21,21,-6,9),r(37,14,9,6,h(3,2)),r(37,14,4.5,6,h(3,3)),r(37,14,9,6),r(50,20,10,-8,h(0,1)),r(50,20,6.5,-8,h(0,2)),r(50,20,3.5,-8,h(0,3)),r(50,20,10,-8),l(55,2,11.4,.5,q-.5,h(3,3)),l(55,2,11.4,.5,q/2,h(3,2),1),l(55,2,11.4,.5,q-.5),r(45,7,20,-7,h(0,2)),r(45,-1,20,4,h(0,3)),r(45,-1,20,8);for(let e=5;e--;)l(60-6*e,30,9.9,0,2*q,h(e+2,3)),l(60-6*e,30,10,-.5,q+.5,h(e+2,2)),l(60-6*e,30,10.1,.5,q-.5,h(e+2,1));l(36,30,10,q/2,3*q/2),l(48,30,10,q/2,3*q/2),l(60,30,10),a(36,20,60,20),l(60,30,4,q,3*q,h(3,2)),l(60,30,4,q,2*q,h(3,3)),l(60,30,4,q,3*q);for(let e=6;e--;)t.beginPath(),t.lineTo(53,54),t.lineTo(53,40),t.lineTo(53+(1+2.9*e)*u,40),t.lineTo(53+(4+3.5*e)*u,54),t.fillStyle=h(0,e%2+2),t.fill(),e%2&&t.stroke();r(6,40,5,5),r(6,40,5,5,h()),r(15,54,38,-14,h());for(let e=3;e--;)for(let i=2;i--;)l(15*e+15,47,i?7:1,q,3*q,h(e,3)),t.stroke(),l(15*e+15,47,i?7:1,0,q,h(e,2)),t.stroke();a(6,40,68,40),a(77,54,4,54),t.font="900 16px arial",t.textAlign="center",t.textBaseline="top",t.lineWidth=.1+3.9*u;let f=0;for(let e=0;e<sP.length;++e)f+=t.measureText(sP[e]).width;for(let e=2;e--;)for(let i=0,s=41-f/2;i<sP.length;++i){t.fillStyle=h(i,2);let r=t.measureText(sP[i]).width;t[e?"strokeText":"fillText"](sP[i],s+r/2,55.5,17*u),s+=r}t.restore()}(t+=.01),t>1?e():setTimeout(i,16)}()})),Promise.all(M).then(v)}function sG(){for(let e of(sD=sI.filter(e=>e.collideSolidObjects),sI))e.parent||(!function e(t){if(!t.destroyed)for(let i of(t.update(),t.children))e(i)}(e),e.updateTransforms());sI=sI.filter(e=>!e.destroyed)}function sF(){for(let e of sI)e.parent||e.destroy();sI=sI.filter(e=>!e.destroyed)}function sV(e,t,i,s=sI){(function(e,t,i=sI){let s=[];if(e){if(t instanceof eE)for(let r of i)el(e,t,r.pos,r.size)&&s.push(r);else{let r=t*t;for(let t of i)e.distanceSquared(t.pos)<r&&s.push(t)}}else for(let e of i)s.push(e);return s})(e,t,s).forEach(e=>i(e))}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],k3151:[function(e,t,i){i.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},i.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.exportAll=function(e,t){return Object.keys(e).forEach(function(i){"default"===i||"__esModule"===i||Object.prototype.hasOwnProperty.call(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[i]}})}),t},i.export=function(e,t,i){Object.defineProperty(e,t,{enumerable:!0,get:i})}},{}],"8HL3d":[function(e,t,i){var s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(i),s.export(i,"randomAddNumber",()=>o),s.export(i,"randomSubstractNumber",()=>a),s.export(i,"randomMultiplyNumber",()=>l),s.export(i,"randomDivideNumber",()=>h),s.export(i,"startGameRound",()=>c);var r=e("./constants"),n=e("./types");let o=e=>Math.floor(Math.random())*(r.MAX_NUMBER-e)+1,a=e=>Math.floor(Math.random()*e)+1,l=e=>{let t=[];for(let i=2;i<=r.MAX_NUMBER;i++)e*i<=r.MAX_NUMBER&&t.push(i);return t[Math.floor(Math.random()*t.length)]},h=e=>{if(1===e)return 1;let t=e-1,i=[];for(;t--;)e%t==0&&i.push(t);return i[Math.floor(Math.random()*i.length)]},c=(e=r.DIFFICULTY.easy)=>{let t=13,i=r.OPERATION_SEQUENCES[e][Math.floor(6*Math.random())].map(e=>{if(e===n.OPERATION_TYPE.ADD){let i=a(t);return t-=i,{type:e,value:i}}if(e===n.OPERATION_TYPE.SUB){let i=o(t);return t+=i,{type:e,value:i}}if(e===n.OPERATION_TYPE.MUL){let i=h(t);return 1===i?null:(t/=i,{type:e,value:i})}if(e===n.OPERATION_TYPE.DIV){let i=l(t);return t*=i,{type:e,value:i}}});return{initialNumber:t,sequence:i.filter(e=>e)}}},{"./constants":"7NbOs","./types":"dHDQY","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"7NbOs":[function(e,t,i){var s,r,n,o,a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(i),a.export(i,"MAX_NUMBER",()=>c),a.export(i,"DIFFICULTY",()=>n),a.export(i,"GAME_STATE",()=>o),a.export(i,"OPERATION_SEQUENCES",()=>u),a.export(i,"COLOR_PALETTE",()=>d);var l=e("littlejsengine"),h=e("./types");let c=99;(s=n||(n={})).easy="easy",s.medium="medium",s.hard="hard",(r=o||(o={}))[r.PLAYING=0]="PLAYING",r[r.LOSE=1]="LOSE",r[r.WIN=2]="WIN";let u={easy:[[h.OPERATION_TYPE.ADD,h.OPERATION_TYPE.MUL],[h.OPERATION_TYPE.MUL,h.OPERATION_TYPE.ADD],[h.OPERATION_TYPE.ADD,h.OPERATION_TYPE.DIV],[h.OPERATION_TYPE.SUB,h.OPERATION_TYPE.MUL],[h.OPERATION_TYPE.MUL,h.OPERATION_TYPE.SUB],[h.OPERATION_TYPE.SUB,h.OPERATION_TYPE.DIV]],medium:[[h.OPERATION_TYPE.ADD,h.OPERATION_TYPE.MUL,h.OPERATION_TYPE.SUB],[h.OPERATION_TYPE.ADD,h.OPERATION_TYPE.DIV,h.OPERATION_TYPE.SUB],[h.OPERATION_TYPE.MUL,h.OPERATION_TYPE.ADD,h.OPERATION_TYPE.DIV],[h.OPERATION_TYPE.MUL,h.OPERATION_TYPE.SUB,h.OPERATION_TYPE.DIV],[h.OPERATION_TYPE.SUB,h.OPERATION_TYPE.MUL,h.OPERATION_TYPE.ADD],[h.OPERATION_TYPE.SUB,h.OPERATION_TYPE.DIV,h.OPERATION_TYPE.ADD]],hard:[[h.OPERATION_TYPE.ADD,h.OPERATION_TYPE.MUL,h.OPERATION_TYPE.SUB,h.OPERATION_TYPE.DIV],[h.OPERATION_TYPE.ADD,h.OPERATION_TYPE.DIV,h.OPERATION_TYPE.SUB,h.OPERATION_TYPE.MUL],[h.OPERATION_TYPE.MUL,h.OPERATION_TYPE.ADD,h.OPERATION_TYPE.DIV,h.OPERATION_TYPE.SUB],[h.OPERATION_TYPE.MUL,h.OPERATION_TYPE.SUB,h.OPERATION_TYPE.DIV,h.OPERATION_TYPE.ADD],[h.OPERATION_TYPE.SUB,h.OPERATION_TYPE.MUL,h.OPERATION_TYPE.ADD,h.OPERATION_TYPE.DIV],[h.OPERATION_TYPE.SUB,h.OPERATION_TYPE.DIV,h.OPERATION_TYPE.ADD,h.OPERATION_TYPE.MUL]]},d={RED:new l.Color(231/255,111/255,81/255,1),ORANGE:new l.Color(244/255,162/255,97/255,1),YELLOW:new l.Color(233/255,196/255,106/255,1),GREEN:new l.Color(42/255,157/255,143/255,1),BLUE:new l.Color(38/255,70/255,83/255,1),WHITE:new l.Color(238/255,238/255,238/255,1),TRANSPARENT:new l.Color(0,0,0,0)}},{littlejsengine:"gSdBJ","./types":"dHDQY","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dHDQY:[function(e,t,i){var s,r,n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(i),n.export(i,"OPERATION_TYPE",()=>r),(s=r||(r={})).ADD="ADD",s.SUB="SUB",s.MUL="MUL",s.DIV="DIV"},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],fQxwN:[function(e,t,i){var s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(i),s.export(i,"renderBackground",()=>o),s.export(i,"renderLevel",()=>a),s.export(i,"renderInstructions",()=>l),s.export(i,"renderMaxLevel",()=>h);var r=e("littlejsengine"),n=e("./constants");let o=()=>{(0,r.drawRect)((0,r.vec2)(0,0),(0,r.vec2)(r.mainCanvas.width,r.mainCanvas.height),n.COLOR_PALETTE.YELLOW)},a=e=>{(0,r.drawText)(`Level ${e}`,(0,r.vec2)(0,12),1,n.COLOR_PALETTE.WHITE,2,n.COLOR_PALETTE.TRANSPARENT)},l=()=>{(0,r.drawRect)((0,r.vec2)(-20,-9),(0,r.vec2)(100,4),n.COLOR_PALETTE.BLUE),(0,r.drawText)("Welcome to 10 + 3! This game will help you with your phobia to... that number.",(0,r.vec2)(0,-9),.5,n.COLOR_PALETTE.WHITE,2,n.COLOR_PALETTE.TRANSPARENT),(0,r.drawText)("Use the arrow keys to perform the operations in the correct order to get... that number.",(0,r.vec2)(-.85,-9.5),.5,n.COLOR_PALETTE.WHITE,2,n.COLOR_PALETTE.TRANSPARENT)},h=e=>{(0,r.drawText)(`Your max. level: ${e}`,(0,r.vec2)(12,12),.5,n.COLOR_PALETTE.WHITE,2,n.COLOR_PALETTE.TRANSPARENT)}},{littlejsengine:"gSdBJ","./constants":"7NbOs","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}]},["8RSWf"],"8RSWf","parcelRequiref445");
//# sourceMappingURL=index.01cb6101.js.map
